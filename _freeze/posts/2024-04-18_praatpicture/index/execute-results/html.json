{
  "hash": "700b70e4166cd5fbfc34fe572322f44c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"How to create elegant waveform/spectrogram images in R\"\ndescription: |\n  In this post I show how to generate waveform/spectrogram graphics in R. \ndate: \"2024-04-18\"\nauthor:\n  - name: Joseph V. Casillas \n    url: https://www.jvcasillas.com\n    affiliation: Rutgers University\n    affiliation_url: https://www.rutgers.edu\nbase_url: https://www.jvcasillas.com\ncategories: [phonetics, praat, dataviz]\ntwitter:\n  creator: \"@jvcasill\"\nengine: knitr\n---\n\n\n\n\n# The problem\n\nGenerating elegant dataviz for spectrogram/waveforms can be cumbersome. \n[Praat](https://www.fon.hum.uva.nl/praat/) has excellent plotting capabilities, but can be rather difficult to teach, especially if you want to plot the waveform/spectrogram/textgrid combination. \nI posted on the topic [a long time ago](https://www.jvcasillas.com/posts/2013-05-09_colored_spectrograms_in_r/2013-05-09_colored_spectrograms_in_r.html) for a solution in R, and this post is an update of sorts, particularly for those not interested in working in Praat directly. \n\n# The solution\n\n[Rasmus Puggaard-Rode's](https://rpuggaardrode.github.io) fantastic package [praatpicture](https://github.com/rpuggaardrode/praatpicture) makes the process trivial. \nAssume we have a wav file called `welcome.wav` and the corresponding textgrid `welcome.TextGrid`. \nWe can plot the wavform/spectrogram/textgrid combination with a simple call to `praatpicture()`:  \n\n\n::: {.cell}\n\n```{.r .cell-code}\npraatpicture(sound = \"welcome.wav\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/fig-welcome-simple-1.png){#fig-welcome-simple width=100%}\n:::\n:::\n\n\nI won't go through all of the capabilities of the package (the documentation is great), but here are a few of my common use cases. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npraatpicture(\n  sound = \"welcome.wav\", \n  spec_freqRange = c(0, 4900),\n  frames = c('sound', 'spectrogram', 'TextGrid'), \n  formant_plotOnSpec = TRUE, \n  formant_color = '#cc0033'\n)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/fig-welcome-formants-1.png){#fig-welcome-formants width=100%}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npraatpicture(\n  sound = \"welcome.wav\", \n  spec_freqRange = c(0, 4900),\n  frames = c('spectrogram'), \n  spec_color = c(\n    'darkblue', 'blue', 'cyan', 'yellow', 'orange', 'brown', '#cc0033')\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/fig-welcome-color-1.png){#fig-welcome-color width=100%}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npraatpicture(\n  sound = \"welcome.wav\", \n  spec_freqRange = c(0, 4900),\n  frames = 'spectrogram', \n  spec_color = c(\"white\", scales::pal_brewer(palette = \"Reds\")(9))\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/fig-welcome-more-color-1.png){#fig-welcome-more-color width=100%}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npraatpicture(\n  sound = \"welcome.wav\", \n  spec_freqRange = c(0, 4900),\n  frames = 'spectrogram', \n  spec_color = c(viridis::viridis_pal(option = \"B\")(8), \"#cc0033\")\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/fig-welcome-even-more-color-1.png){#fig-welcome-even-more-color width=100%}\n:::\n:::\n\n\n## Reproducibility information\n\nThis document was written in `quarto`.\n\n**Session info**  \n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n setting  value\n version  R version 4.3.1 (2023-06-16)\n os       macOS Sonoma 14.1\n system   aarch64, darwin20\n ui       X11\n language (EN)\n collate  en_US.UTF-8\n ctype    en_US.UTF-8\n tz       America/New_York\n date     2024-04-18\n pandoc   3.1.1 @ /Applications/RStudio.app/Contents/Resources/app/quarto/bin/tools/ (via rmarkdown)\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n             loadedversion       date\nbit                  4.0.5 2022-11-15\nbit64                4.0.5 2020-08-30\ncachem               1.0.8 2023-05-01\ncli                  3.6.2 2023-12-11\ncolorspace           2.1-0 2023-01-23\ncrayon               1.5.2 2022-09-29\ndevtools             2.4.5 2022-10-11\ndigest              0.6.35 2024-03-11\ndplyr                1.1.4 2023-11-17\nellipsis             0.3.2 2021-04-29\nevaluate              0.23 2023-11-01\nfansi                1.0.6 2023-12-08\nfastmap              1.1.1 2023-02-24\nfs                   1.6.3 2023-07-20\ngenerics             0.1.3 2022-07-05\nggplot2              3.5.0 2024-02-23\nglue                 1.7.0 2024-01-09\ngridExtra              2.3 2017-09-09\ngtable               0.3.4 2023-08-21\nhere                 1.0.1 2020-12-13\nhms                  1.1.3 2023-03-21\nhtmltools            0.5.7 2023-11-03\nhtmlwidgets          1.6.4 2023-12-06\nhttpuv              1.6.14 2024-01-26\njsonlite             1.8.8 2023-12-04\nknitr                 1.45 2023-10-30\nlater                1.3.2 2023-12-06\nlifecycle            1.0.4 2023-11-07\nmagrittr             2.0.3 2022-03-30\nMASS            7.3-60.0.1 2024-01-13\nmemoise              2.0.1 2021-11-26\nmime                  0.12 2021-09-28\nminiUI             0.1.1.1 2018-05-18\nmunsell              0.5.0 2018-06-12\nphonTools          0.2-2.2 2023-11-20\npillar               1.9.0 2023-03-22\npkgbuild             1.4.3 2023-12-10\npkgconfig            2.0.3 2019-09-22\npkgload              1.3.4 2024-01-16\npraatpicture         1.0.0 2024-03-07\nprofvis              0.3.8 2023-05-02\npromises             1.2.1 2023-08-10\npurrr                1.0.2 2023-08-10\nR6                   2.5.1 2021-08-19\nRColorBrewer         1.1-3 2022-04-03\nRcpp                1.0.12 2024-01-09\nreadr                2.1.5 2024-01-10\nremotes            2.4.2.1 2023-07-18\nrlang                1.1.3 2024-01-10\nrmarkdown             2.26 2024-03-05\nrPraat             1.3.2-1 2021-02-27\nrprojroot            2.0.4 2023-11-05\nrstudioapi          0.16.0 2024-03-24\nscales               1.3.0 2023-11-28\nsessioninfo          1.2.2 2021-12-06\nshiny                1.8.0 2023-11-17\nsignal               1.8-0 2023-11-27\nstringi              1.8.3 2023-12-11\nstringr              1.5.1 2023-11-14\ntibble               3.2.1 2023-03-20\ntidyselect           1.2.1 2024-03-11\ntuneR                1.4.6 2023-11-27\ntzdb                 0.4.0 2023-05-12\nurlchecker           1.0.1 2021-11-30\nusethis              2.2.3 2024-02-19\nutf8                 1.2.4 2023-10-22\nvctrs                0.6.5 2023-12-01\nviridis              0.6.5 2024-01-29\nviridisLite          0.4.2 2023-05-02\nvroom                1.6.5 2023-12-05\nwrassp               1.0.5 2024-01-09\nxfun                  0.42 2024-02-08\nxtable               1.8-4 2019-04-21\nyaml                 2.3.8 2023-12-11\n```\n\n\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}